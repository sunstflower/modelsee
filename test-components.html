<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ModelAddç»„ä»¶é‡æ„æµ‹è¯•</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        .header {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .status {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
        }
        .status-item {
            padding: 10px 15px;
            border-radius: 6px;
            font-weight: 500;
        }
        .status-success {
            background-color: #d4edda;
            color: #155724;
        }
        .status-error {
            background-color: #f8d7da;
            color: #721c24;
        }
        .test-section {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .test-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }
        .test-item {
            border: 1px solid #e0e0e0;
            border-radius: 6px;
            padding: 15px;
            background: #fafafa;
        }
        .test-item h4 {
            margin: 0 0 10px 0;
            color: #333;
        }
        .test-result {
            padding: 8px 12px;
            border-radius: 4px;
            font-size: 14px;
            margin-top: 10px;
        }
        .success {
            background-color: #d4edda;
            color: #155724;
        }
        .error {
            background-color: #f8d7da;
            color: #721c24;
        }
        .warning {
            background-color: #fff3cd;
            color: #856404;
        }
        .loading {
            background-color: #cce7ff;
            color: #004085;
        }
        iframe {
            width: 100%;
            height: 600px;
            border: 1px solid #ddd;
            border-radius: 6px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ§ª ModelAddç»„ä»¶é‡æ„æµ‹è¯•</h1>
            <p>æµ‹è¯•é‡æ„åçš„ç¥ç»ç½‘ç»œå±‚é…ç½®ç»„ä»¶åŠŸèƒ½</p>
            
            <div class="status" id="status">
                <div class="status-item loading">æ£€æŸ¥ä¸­...</div>
            </div>
        </div>

        <div class="test-section">
            <h2>ğŸ“¡ æœåŠ¡çŠ¶æ€æ£€æŸ¥</h2>
            <div class="test-grid">
                <div class="test-item">
                    <h4>åç«¯APIæœåŠ¡</h4>
                    <div>ç«¯ç‚¹: http://127.0.0.1:8000</div>
                    <div class="test-result" id="backend-status">æ£€æŸ¥ä¸­...</div>
                </div>
                <div class="test-item">
                    <h4>å‰ç«¯å¼€å‘æœåŠ¡</h4>
                    <div>ç«¯ç‚¹: http://localhost:5173</div>
                    <div class="test-result" id="frontend-status">æ£€æŸ¥ä¸­...</div>
                </div>
                <div class="test-item">
                    <h4>å±‚ç»„ä»¶æ•°æ®</h4>
                    <div>API: /layers</div>
                    <div class="test-result" id="layers-status">æ£€æŸ¥ä¸­...</div>
                </div>
            </div>
        </div>

        <div class="test-section">
            <h2>ğŸ”§ é‡æ„å®Œæˆçš„ç»„ä»¶</h2>
            <div class="test-grid">
                <div class="test-item">
                    <h4>âœ… NodeContainer</h4>
                    <div>å…±äº«èŠ‚ç‚¹å®¹å™¨ï¼Œæ”¯æŒåŸºæœ¬/é«˜çº§é…ç½®åˆ†ç¦»</div>
                    <div class="test-result success">é‡æ„å®Œæˆ</div>
                </div>
                <div class="test-item">
                    <h4>âœ… Dense Layer</h4>
                    <div>å…¨è¿æ¥å±‚ï¼Œæ”¯æŒå®Œæ•´å‚æ•°é…ç½®</div>
                    <div class="test-result success">é‡æ„å®Œæˆ</div>
                </div>
                <div class="test-item">
                    <h4>âœ… Conv2D Layer</h4>
                    <div>å·ç§¯å±‚ï¼Œæ™ºèƒ½å°ºå¯¸è¾“å…¥ç»„ä»¶</div>
                    <div class="test-result success">é‡æ„å®Œæˆ</div>
                </div>
                <div class="test-item">
                    <h4>âœ… Dropout Layer</h4>
                    <div>ä¸¢å¼ƒå±‚ï¼Œå¯è§†åŒ–ä¸¢å¼ƒç‡è®¾ç½®</div>
                    <div class="test-result success">é‡æ„å®Œæˆ</div>
                </div>
                <div class="test-item">
                    <h4>âœ… Flatten Layer</h4>
                    <div>å±•å¹³å±‚ï¼Œä¿¡æ¯å±•ç¤ºå‹ç»„ä»¶</div>
                    <div class="test-result success">é‡æ„å®Œæˆ</div>
                </div>
                <div class="test-item">
                    <h4>âœ… Activation Layer</h4>
                    <div>æ¿€æ´»å±‚ï¼ŒåŠ¨æ€å‚æ•°é…ç½®</div>
                    <div class="test-result success">é‡æ„å®Œæˆ</div>
                </div>
                <div class="test-item">
                    <h4>âœ… MaxPooling2D Layer</h4>
                    <div>æœ€å¤§æ± åŒ–å±‚ï¼Œæ™ºèƒ½å°ºå¯¸é€‰æ‹©å™¨</div>
                    <div class="test-result success">é‡æ„å®Œæˆ</div>
                </div>
            </div>
        </div>

        <div class="test-section">
            <h2>âœ… æ–°å®Œæˆçš„ç»„ä»¶é‡æ„</h2>
            <div class="test-grid">
                <div class="test-item">
                    <h4>âœ… BatchNorm Layer</h4>
                    <div>æ‰¹å½’ä¸€åŒ–å±‚ï¼Œæ”¯æŒå®Œæ•´å‚æ•°é…ç½®</div>
                    <div class="test-result success">é‡æ„å®Œæˆ</div>
                </div>
                <div class="test-item">
                    <h4>âœ… AvgPooling2D Layer</h4>
                    <div>å¹³å‡æ± åŒ–å±‚ï¼Œæ™ºèƒ½å°ºå¯¸é€‰æ‹©å™¨</div>
                    <div class="test-result success">é‡æ„å®Œæˆ</div>
                </div>
                <div class="test-item">
                    <h4>âœ… Reshape Layer</h4>
                    <div>é‡å¡‘å±‚ï¼Œå½¢çŠ¶é¢„è®¾å’Œè‡ªå®šä¹‰è¾“å…¥</div>
                    <div class="test-result success">é‡æ„å®Œæˆ</div>
                </div>
                <div class="test-item">
                    <h4>âœ… LSTM Layer</h4>
                    <div>é•¿çŸ­æœŸè®°å¿†å±‚ï¼Œå®Œæ•´çš„å¾ªç¯ç½‘ç»œé…ç½®</div>
                    <div class="test-result success">é‡æ„å®Œæˆ</div>
                </div>
                <div class="test-item">
                    <h4>âœ… GRU Layer</h4>
                    <div>é—¨æ§å¾ªç¯å•å…ƒå±‚ï¼Œé«˜æ•ˆçš„åºåˆ—å¤„ç†</div>
                    <div class="test-result success">é‡æ„å®Œæˆ</div>
                </div>
            </div>
        </div>

        <div class="test-section">
            <h2>ğŸ–¥ï¸ å®é™…åº”ç”¨é¢„è§ˆ</h2>
            <p>åœ¨æ–°çª—å£ä¸­æ‰“å¼€å‰ç«¯åº”ç”¨è¿›è¡Œæµ‹è¯•ï¼š</p>
            <a href="http://localhost:5173" target="_blank" style="display: inline-block; padding: 10px 20px; background: #007bff; color: white; text-decoration: none; border-radius: 6px;">æ‰“å¼€å‰ç«¯åº”ç”¨</a>
        </div>

        <div class="test-section">
            <h2>ğŸ“‹ é‡æ„ç‰¹æ€§æ€»ç»“</h2>
            <ul style="line-height: 1.8;">
                <li><strong>ç»Ÿä¸€è®¾è®¡æ¨¡å¼</strong>ï¼šæ‰€æœ‰ç»„ä»¶éƒ½éµå¾ªä¸€è‡´çš„æ¶æ„</li>
                <li><strong>å­—æ®µæç¤ºç³»ç»Ÿ</strong>ï¼šæ¯ä¸ªé…ç½®é¡¹éƒ½æœ‰è¯¦ç»†çš„è¯´æ˜</li>
                <li><strong>åŸºæœ¬/é«˜çº§é…ç½®åˆ†ç¦»</strong>ï¼šç®€åŒ–åˆå§‹ç•Œé¢ï¼Œå±•å¼€æ˜¾ç¤ºé«˜çº§é€‰é¡¹</li>
                <li><strong>åç«¯æ•°æ®ç»“æ„ä¸€è‡´</strong>ï¼šé…ç½®æ ¼å¼ä¸åç«¯APIå®Œå…¨åŒ¹é…</li>
                <li><strong>æ™ºèƒ½é»˜è®¤å€¼</strong>ï¼šæ ¹æ®å±‚ç±»å‹å’Œä½ç½®è®¾ç½®åˆç†é»˜è®¤å€¼</li>
                <li><strong>ç”¨æˆ·ä½“éªŒä¼˜åŒ–</strong>ï¼šæ›´å¥½çš„è§†è§‰åé¦ˆå’Œäº¤äº’è®¾è®¡</li>
            </ul>
        </div>
    </div>

    <script>
        // æ£€æŸ¥æœåŠ¡çŠ¶æ€
        async function checkServices() {
            const statusDiv = document.getElementById('status');
            const backendStatus = document.getElementById('backend-status');
            const frontendStatus = document.getElementById('frontend-status');
            const layersStatus = document.getElementById('layers-status');

            try {
                // æ£€æŸ¥åç«¯
                const backendResponse = await fetch('http://127.0.0.1:8000/health');
                if (backendResponse.ok) {
                    const data = await backendResponse.json();
                    backendStatus.className = 'test-result success';
                    backendStatus.textContent = `âœ… æ­£å¸¸è¿è¡Œ (Redis: ${data.redis_status})`;
                } else {
                    throw new Error('Backend not responding');
                }
            } catch (error) {
                backendStatus.className = 'test-result error';
                backendStatus.textContent = 'âŒ æœåŠ¡å¼‚å¸¸';
            }

            try {
                // æ£€æŸ¥å‰ç«¯
                const frontendResponse = await fetch('http://localhost:5173');
                if (frontendResponse.ok) {
                    frontendStatus.className = 'test-result success';
                    frontendStatus.textContent = 'âœ… æ­£å¸¸è¿è¡Œ';
                } else {
                    throw new Error('Frontend not responding');
                }
            } catch (error) {
                frontendStatus.className = 'test-result error';
                frontendStatus.textContent = 'âŒ æœåŠ¡å¼‚å¸¸';
            }

            try {
                // æ£€æŸ¥å±‚ç»„ä»¶æ•°æ®
                const layersResponse = await fetch('http://127.0.0.1:8000/layers');
                if (layersResponse.ok) {
                    const data = await layersResponse.json();
                    if (data.success && data.layers && data.layers.layers) {
                        const layerCount = Object.keys(data.layers.layers).length;
                        layersStatus.className = 'test-result success';
                        layersStatus.textContent = `âœ… ${layerCount} ä¸ªå±‚ç»„ä»¶å·²åŠ è½½ (CORSå·²ä¿®å¤)`;
                    } else {
                        throw new Error('Invalid layers data structure');
                    }
                } else {
                    throw new Error('Layers API not responding');
                }
            } catch (error) {
                layersStatus.className = 'test-result error';
                layersStatus.textContent = 'âŒ æ•°æ®åŠ è½½å¤±è´¥: ' + error.message;
            }

            // æ›´æ–°æ€»ä½“çŠ¶æ€
            statusDiv.innerHTML = '<div class="status-item status-success">âœ… æ£€æŸ¥å®Œæˆ</div>';
        }

        // é¡µé¢åŠ è½½åæ£€æŸ¥æœåŠ¡
        window.addEventListener('load', checkServices);
    </script>
</body>
</html> 